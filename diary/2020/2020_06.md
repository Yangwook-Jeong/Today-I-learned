## 01.06.2020

- libuv
  - 네트워크, 파일 i/o 등 비동기 처리 지원한다.
  - 비동기는 시스템마다 제공하는 api 이용한다.
    - windows: iocp
    - linux: epoll
    - macos: kqueue
  - 시스템에서 제공하는 api가 없거나 특수한 경우 쓰레드풀을 이용한다.
  - 네트워크, 소켓 작업은 시스템 api를 이용하며 파일은 쓰레드풀을 이용한다.

- kubernetes
  - orchestration: 배포, 롤백, 복제 등을 손쉽게 하는 스케일에 대한 유연성을 갖고 있다는 것을 말한다.
  - features
    - 컨테이너를 실행하는 호스트그룹을 클러스터링할 수 있다.
    - 적절한 위치에 배포하고 서비스할 수 있다.
    - 자동으로 복구할 수 있다.
    - 자동으로 추가, 복제, 업데이트, 롤백할 수 있다.
  - terms
    - cluster
      - 하나의 master와 여러개의 node로 구성된 추상개념이다.
      - 컨테이너화된 애플리케이션을 배포, 관리하는 논리적 환경이다.
    - master
      - master로 cluster를 관리한다.
      - master node는 1대 이상 구축할 수 있다.
      - api server, controller manager, scheduler, etcd 등으로 cluster 내 연결된 node들의 이벤트를 감지하고, worker node에 배포, 스케일링 등의 명령을 내린다.
    - node
      - vm머신으로 실제 dokcer engine이 구동되어 컨테이너가 실행되는 서버이다.
      - master의 api server로부터 명령을 받아 컨테이너의 상태를 관리한다. (node === worker === minion)
    - kubernetes object
      - object를 생성하고자 할 때 kubernetes 시스템에 해당 객체의 spec과 원하는 상태나 특성 등을 알려줘야 한다.
      - 리소스 배포는 일반적으로 yaml 형식으로 정의한 파일을 `kubectl create` 또는 `kubectl apply` 명령어를 사용해 배포하는 것이 일반적이다.
    - spec
      ```yml
      apiVersion: apps/v1 # for versions before 1.9.0 use apps/v1beta2
      kind: Deployment
      metadata:
        name: nginx-deployment
      spec:
        selector:
          matchLabels:
            app: nginx
        replicas: 3 # tells deployment to run 2 pods matching the template
        template:
          metadata:
            labels:
              app: nginx
          spec:
            containers:
            - name: nginx
              image: nginx:1.7.9
              ports:
              - containerPort: 80
      ```